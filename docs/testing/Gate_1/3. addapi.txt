*** Settings ***
Library		Selenium2Library
Suite Setup 	Go to homepage
Suite Teardown 	Close All Browsers

*** Variables ***
${BROWSER} 	chrome
${HOMEPAGE} 	http://localhost:3000
${APINAME}	Kissa

*** Test Cases ***
Login to apinf
	Go to login
	Login to apinf	asdas	asdasd
	confirm page loaded	Users

#Create new api no name (fail)
	#Create API	${EMPTY}	asdasd	https://www.google.com
	#confirm page loaded	is required

Create new api no url (fail)
	Create API	asdasd	${EMPTY}
	confirm page loaded	is required

Create new api (pass)
	Create API	${EMPTY}	https://www.google.com
	confirm page loaded	Kappa

Delete api
	#Delete API

*** Keywords *** 
Go to homepage
	Open Browser	${HOMEPAGE} 	${BROWSER}

Go to login
	Click Element 	id=frontpage-button
	Click Element	id=signin-button

Login to apinf	
	[Arguments]	${username}	${password}
	Input Text	id=at-field-username_and_email	${username}
	Input Password 	id=at-field-password	${password}
	Click Button	id=at-btn

confirm page loaded
	[Arguments] 	${searchkey}
	Wait Until Page Contains 	${searchkey}

Create API
	[Arguments] 	${description}	${url}
	Click Element 	id=addapi-button
	Input Text 	id=api-name	${APINAME}
	Input Text	id=api-description	${description}
	Input Text	id=api-url	${url}
	Click Element	id=submitapi-button

#Delete API
	Go To	http://localhost:3000/apis/kissa
	Wait Until Page Contains	media
	Select From List	id=api-settings-tab
	Click Element	id=delete-api
	Wait Until Element Is Visible	id=modal-delete-api
	Click Element	id=modal-delete-api
	Page Should Not Contain	${APINAME}